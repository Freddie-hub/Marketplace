(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347,975],{1602:(e,a,s)=>{Promise.resolve().then(s.bind(s,2406))},2406:(e,a,s)=>{"use strict";s.d(a,{default:()=>b});var r=s(5155),n=s(2115),t=s(5695),l=s(2945),o=s(5963),i=s(5933);function d(){let e=(0,i._)(["\n  mutation GoogleSignup($args: GoogleSignupInput!) {\n    GoogleSignup(args: $args) {\n      status\n      message\n      token\n      user {\n        id\n        email\n        Fname\n        Lname\n        role\n        photo\n        warehouse {\n          id\n          name\n          location\n          address\n          capacity\n          phone\n          email\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}let c=(0,s(6112).J1)(d());var u=s(9772),m=s(1264),g=s(2919),h=s(9420),p=s(7340),x=s(6083),N=s(8543);let f=e=>{let{icon:a,...s}=e;return(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)("span",{className:"absolute left-4 text-gray-400",children:a}),(0,r.jsx)("input",{...s,className:"w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#00796B] focus:border-transparent transition-shadow duration-300"})]})},b=e=>{let{role:a,title:s,subtitle:i}=e,d=(0,t.useRouter)(),[b,y]=(0,n.useState)({firstName:"",middleName:"",lastName:"",email:"",password:"",phone:"",address:""}),[w,j]=(0,n.useState)(null),[v,S]=(0,n.useState)(!1),[_,{loading:A}]=(0,l.n)(o.RD),[F,{loading:C}]=(0,l.n)(c),k=e=>{let{name:a,value:s}=e.target;y(e=>({...e,[a]:s}))},R=()=>b.firstName&&b.lastName&&b.email&&b.password?(j(null),!0):(j("Please fill in all required fields: First Name, Last Name, Email, and Password."),!1),E=async()=>{if(R())try{var e,s,r,n,t,l;let o={args:{email:b.email,Fname:b.firstName,Lname:b.lastName,Mname:b.middleName,phone:b.phone||null,address:b.address||null,password:b.password,role:a,photo:""}};console.log("Sending signup request with variables:",o);let i=await _({variables:o});if(console.log("Signup result:",i),(null==(s=i.data)||null==(e=s.createFarmerOrBuyer)?void 0:e.status)==="Success"){let e=(null==(n=i.data)||null==(r=n.createFarmerOrBuyer)?void 0:r.message)||"Account created successfully!";N.oR.success(e),setTimeout(()=>{d.push("/login")},1e3)}else{let e=(null==(l=i.data)||null==(t=l.createFarmerOrBuyer)?void 0:t.message)||"Signup failed. Please try again.";j(e),N.oR.error(e)}}catch(a){console.error("Signup error:",a);let e=a.message||"An error occurred during signup.";j(e),N.oR.error(e)}},G=async e=>{j(null);try{var s,r;let n=JSON.parse(atob(e.credential.split(".")[1])),t={args:{googleUserData:{email:n.email,Fname:n.given_name,Lname:n.family_name||"",googleId:n.sub,photo:n.picture},role:a,..."WAREHOUSE_GUY"===a&&{warehouse_name:b.firstName+"'s Warehouse",warehouse_location:b.address||"Location TBD",warehouse_address:b.address,warehouse_capacity:1e3,warehouse_phone:b.phone,warehouse_email:b.email}}},l=null==(r=(await F({variables:t})).data)||null==(s=r.GoogleSignup)?void 0:s.token;l?(localStorage.setItem("token",l),N.oR.success("Google signup successful!"),setTimeout(()=>{d.push("/dashboard")},1e3)):(N.oR.info("Authentication token not received."),setTimeout(()=>{d.push("/login")},1e3))}catch(a){console.error("Google signup error:",a);let e=a.message||"Google Sign-In failed.";j(e),N.oR.error(e)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4 font-sans",children:(0,r.jsxs)("div",{className:"w-full max-w-lg bg-white rounded-2xl shadow-lg p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:s}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:i})]}),w&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-300 text-red-700 rounded-lg text-center",role:"alert",children:w}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(f,{icon:(0,r.jsx)(u.A,{size:16}),name:"firstName",type:"text",placeholder:"First Name *",value:b.firstName,onChange:k,required:!0,"aria-label":"First Name"}),(0,r.jsx)(f,{icon:(0,r.jsx)("span",{className:"opacity-0 w-4"}),name:"lastName",type:"text",placeholder:"Last Name *",value:b.lastName,onChange:k,required:!0,"aria-label":"Last Name"})]}),(0,r.jsx)(f,{icon:(0,r.jsx)(u.A,{size:16,className:"text-transparent"}),name:"middleName",type:"text",placeholder:"Middle Name (Optional)",value:b.middleName,onChange:k,"aria-label":"Middle Name"}),(0,r.jsx)(f,{icon:(0,r.jsx)(m.A,{size:16}),name:"email",type:"email",placeholder:"Email Address *",value:b.email,onChange:k,required:!0,"aria-label":"Email Address"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f,{icon:(0,r.jsx)(g.A,{size:16}),name:"password",type:v?"text":"password",placeholder:"Password *",value:b.password,onChange:k,required:!0,"aria-label":"Password"}),(0,r.jsx)("button",{type:"button",onClick:()=>S(!v),className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-medium text-[#00796B]","aria-label":v?"Hide password":"Show password",children:v?"Hide":"Show"})]}),(0,r.jsx)("hr",{className:"border-t border-gray-200"}),(0,r.jsx)("p",{className:"text-sm text-center text-gray-500",children:"Optional Information"}),(0,r.jsx)(f,{icon:(0,r.jsx)(h.A,{size:16}),name:"phone",type:"tel",placeholder:"Phone Number",value:b.phone,onChange:k,"aria-label":"Phone Number"}),(0,r.jsx)(f,{icon:(0,r.jsx)(p.A,{size:16}),name:"address",type:"text",placeholder:"Address",value:b.address,onChange:k,"aria-label":"Address"})]}),(0,r.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,r.jsx)("button",{onClick:E,disabled:A,className:"w-full bg-[#00796B] text-white py-3 rounded-lg hover:bg-[#004D40] transition-colors duration-300 font-semibold disabled:bg-gray-400 shadow-md hover:shadow-lg",children:A?"Creating Account...":"Sign up with Email"}),(0,r.jsxs)("div",{className:"flex items-center text-gray-400",children:[(0,r.jsx)("hr",{className:"flex-grow border-t border-gray-200"}),(0,r.jsx)("span",{className:"px-4 text-xs font-semibold",children:"OR"}),(0,r.jsx)("hr",{className:"flex-grow border-t border-gray-200"})]}),(0,r.jsx)("div",{className:"w-full flex justify-center ".concat(A||C?"opacity-50 pointer-events-none":""),children:(0,r.jsx)(x.j,{onSuccess:G,onError:()=>{j("Google Sign-In failed. Please try again."),N.oR.error("Google Sign-In failed. Please try again.")},theme:"outline",size:"large",width:"100%",text:"signup_with"})})]}),(0,r.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,r.jsx)("a",{href:"/login",className:"font-semibold text-[#00796B] hover:underline",children:"Log In"})]})]})})}},5963:(e,a,s)=>{"use strict";s.d(a,{RD:()=>i,kD:()=>d});var r=s(5933),n=s(6112);function t(){let e=(0,r._)(["\n  mutation CreateFarmer($args: FarmerArgs) {\n    createFarmer(args: $args) {\n      status\n      message\n    }\n  }\n"]);return t=function(){return e},e}function l(){let e=(0,r._)(["\n  mutation CreateFarmer($args: FarmerArgs) {\n    createFarmer(args: $args) {\n      status\n      message\n    }\n  }\n"]);return l=function(){return e},e}function o(){let e=(0,r._)(["\n  mutation CreateWarehouseWithManager($args: WarehouseRegistrationArgs) {\n    createWarehouseWithManager(args: $args) {\n      status\n      message\n      token\n      user {\n        id\n        email\n        role\n        password\n        Mname\n        Lname\n        Fname\n      }\n    }\n  }\n"]);return o=function(){return e},e}(0,n.J1)(t());let i=(0,n.J1)(l()),d=(0,n.J1)(o())}},e=>{var a=a=>e(e.s=a);e.O(0,[543,980,687,630,441,684,358],()=>a(1602)),_N_E=e.O()}]);