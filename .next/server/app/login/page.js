(()=>{var e={};e.id=520,e.ids=[520],e.modules={3045:(e,r,o)=>{"use strict";o.r(r),o.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=o(65239),s=o(48088),n=o(88170),a=o.n(n),i=o(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);o.d(r,l);let d={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,94934)),"C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\login\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(o.bind(o,94431)),"C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(o.t.bind(o,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(o.t.bind(o,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(o.bind(o,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\login\\page.tsx"],u={require:o,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8177:(e,r,o)=>{Promise.resolve().then(o.bind(o,89349)),Promise.resolve().then(o.bind(o,93853)),Promise.resolve().then(o.bind(o,72071))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21083:(e,r,o)=>{Promise.resolve().then(o.t.bind(o,86346,23)),Promise.resolve().then(o.t.bind(o,27924,23)),Promise.resolve().then(o.t.bind(o,35656,23)),Promise.resolve().then(o.t.bind(o,40099,23)),Promise.resolve().then(o.t.bind(o,38243,23)),Promise.resolve().then(o.t.bind(o,28827,23)),Promise.resolve().then(o.t.bind(o,62763,23)),Promise.resolve().then(o.t.bind(o,97173,23))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41612:(e,r,o)=>{"use strict";o.d(r,{ApolloProvider:()=>t});let t=(0,o(12907).registerClientReference)(function(){throw Error("Attempted to call ApolloProvider() from the server but ApolloProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\apollo-provider.tsx","ApolloProvider")},41661:(e,r,o)=>{Promise.resolve().then(o.bind(o,54242))},46397:(e,r,o)=>{Promise.resolve().then(o.bind(o,94934))},54242:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>m});var t=o(60687),s=o(43210),n=o(16189),a=o(56658),i=o(79826);let l=(0,i.J1)`
mutation Login($args: LoginArgs) {
  Login(args: $args) {
    status
    message
    token
    user {
      id
      Fname
      Mname
      Lname
      photo
      email
      role
      password
      warehouse {
        id
        capacity
        email
        address
        location
        managerId
        name
        phone
      }
    }
  }
}
`;var d=o(93853),c=o(89349);class u extends Error{}u.prototype.name="InvalidTokenError";var p=o(85814),g=o.n(p);function m(){let e=(0,n.useRouter)(),[r,o]=(0,s.useState)({email:"",password:""}),[i,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[f,{loading:b,error:v}]=(0,a.n)(l),x=e=>{let{name:r,value:t}=e.target;o(e=>({...e,[r]:t}))},w=async e=>{e.preventDefault(),await y()},P=r=>{"ADMINISTRATOR"===r.role?e.push("/admin-dashboard"):"WAREHOUSE_GUY"===r.role?e.push("/warehouse-dashboard"):"BUYER"===r.role?e.push("/buyer-dashboard"):e.push("/dashboard")},y=async()=>{if(!r.email||!r.password)return void d.oR.error("Please fill in all fields");h(!0);try{let{data:o}=await f({variables:{args:{email:r.email.trim(),password:r.password}}});if(console.log("Login response:",o),o?.Login?.status==="Success"&&o?.Login?.token)localStorage.setItem("token",o.Login.token),o.Login.user?(localStorage.setItem("user",JSON.stringify(o.Login.user)),d.oR.success(o.Login.message||"Login successful!"),P(o.Login.user)):e.push("/dashboard");else throw Error(o?.Login?.message||"Login failed: Invalid response from server.")}catch(e){console.error("Login error:",e),e.message?d.oR.error(e.message):d.oR.error("An error occurred during login")}finally{h(!1)}},k=async r=>{h(!0);try{if(r.credential){let o=function(e,r){let o;if("string"!=typeof e)throw new u("Invalid token specified: must be a string");r||(r={});let t=+(!0!==r.header),s=e.split(".")[t];if("string"!=typeof s)throw new u(`Invalid token specified: missing part #${t+1}`);try{o=function(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw Error("base64 string is not of the correct length")}try{var o;return o=r,decodeURIComponent(atob(o).replace(/(.)/g,(e,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch(e){return atob(r)}}(s)}catch(e){throw new u(`Invalid token specified: invalid base64 for part #${t+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new u(`Invalid token specified: invalid json for part #${t+1} (${e.message})`)}}(r.credential).email;if(!o)return void d.oR.error("Google login failed: No email found");let{data:t}=await f({variables:{args:{email:o,password:""}}});if(t?.Login?.status==="Success"&&t?.Login?.token)localStorage.setItem("token",t.Login.token),t.Login.user&&localStorage.setItem("user",JSON.stringify(t.Login.user)),d.oR.success(t.Login.message||"Welcome back!"),t.Login.user?P(t.Login.user):e.push("/dashboard");else throw Error(t?.Login?.message||"Google login failed")}else d.oR.error("Google login failed: No credential received")}catch(e){console.error("Google Login Error:",e),e.message.includes("Google Sign-In")?d.oR.error("This account is linked to Google. Please use Google sign-in."):e.message.includes("No account found")?d.oR.error("No account found. Please sign up first."):d.oR.error(e.message||"Google login failed")}finally{h(!1)}},j=b||m;return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#476869] p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8 space-y-6 animate-fade-in",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-[#205D5A]",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Log in to continue to the Marketplace."})]}),v&&(0,t.jsx)("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded-xl text-center",children:v.message}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("input",{name:"email",type:"email",placeholder:"Email Address",value:r.email,onChange:x,required:!0,disabled:j,className:"w-full p-3 border-2 rounded-xl border-[#00A79D] bg-white text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#00A79D] transition disabled:bg-gray-100 disabled:cursor-not-allowed"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{name:"password",type:i?"text":"password",placeholder:"Password",value:r.password,onChange:x,required:!0,disabled:j,className:"w-full p-3 border-2 rounded-xl border-[#00A79D] bg-white text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#00A79D] transition disabled:bg-gray-100 disabled:cursor-not-allowed pr-16"}),(0,t.jsx)("button",{type:"button",onClick:()=>{p(!i)},disabled:j,className:"absolute right-4 top-1/2 -translate-y-1/2 text-sm font-medium text-[#00A79D] hover:text-[#205D5A] transition disabled:text-gray-400",children:i?"Hide":"Show"})]}),(0,t.jsx)("button",{type:"submit",disabled:j,className:"w-full bg-[#00A79D] text-white py-3 rounded-xl hover:bg-[#205D5A] transition duration-300 font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:j?"Logging in...":"Log In"})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(c.j,{size:"large",shape:"rectangular",theme:"outline",onSuccess:k,onError:()=>{d.oR.error("Google login failed")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 font-medium",children:[(0,t.jsx)(g(),{href:"/reset-password",className:"text-[#BD011F] hover:underline transition",children:"Forgot password?"}),(0,t.jsx)(g(),{href:"/",className:"text-[#205D5A] hover:underline transition",children:"Create an account"})]})]})})}},55427:(e,r,o)=>{Promise.resolve().then(o.t.bind(o,16444,23)),Promise.resolve().then(o.t.bind(o,16042,23)),Promise.resolve().then(o.t.bind(o,88170,23)),Promise.resolve().then(o.t.bind(o,49477,23)),Promise.resolve().then(o.t.bind(o,29345,23)),Promise.resolve().then(o.t.bind(o,12089,23)),Promise.resolve().then(o.t.bind(o,46577,23)),Promise.resolve().then(o.t.bind(o,31307,23))},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>s});var t=o(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72071:(e,r,o)=>{"use strict";o.d(r,{ApolloProvider:()=>h});var t=o(60687),s=o(38281),n=o(26408),a=o(83649),i=o(39768),l=o(1566),d=o(14744),c=o(42629);let u=(0,n.$)({uri:"https://coffee-sys-api.vercel.app/graphql"}),p=(0,d.o)((e,{headers:r})=>({headers:{...r,authorization:""}})),g=(0,c.S)(({graphQLErrors:e,networkError:r})=>{e&&e.forEach(({message:e,locations:r,path:o})=>{console.error(`GraphQL error: Message: ${e}, Location: ${r}, Path: ${o}`)}),r&&(console.error(`Network error: ${r}`),"statusCode"in r&&401===r.statusCode&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"))}),m=new a.R({link:(0,i.H)([g,p,u]),cache:new l.D,defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}});function h({children:e}){return(0,t.jsx)(s.X,{client:m,children:e})}},79551:e=>{"use strict";e.exports=require("url")},92497:(e,r,o)=>{Promise.resolve().then(o.bind(o,74559)),Promise.resolve().then(o.bind(o,81819)),Promise.resolve().then(o.bind(o,41612))},94431:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>i});var t=o(37413);o(61135),o(56070);var s=o(41612),n=o(74559),a=o(81819);function i({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsxs)("body",{children:[(0,t.jsx)(a.ToastContainer,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,t.jsx)(n.GoogleOAuthProvider,{clientId:"411082912715-r127ug6243m299mlq0iq5k4rgfbd09mp.apps.googleusercontent.com",children:(0,t.jsx)(s.ApolloProvider,{children:e})})]})})}},94934:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>t});let t=(0,o(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\HP\\\\Downloads\\\\Marketplace\\\\Marketplace Code\\\\src\\\\app\\\\login\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\login\\page.tsx","default")}};var r=require("../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[447,223,658,418,677],()=>o(3045));module.exports=t})();