exports.id=357,exports.ids=[357],exports.modules={260:(e,r,s)=>{"use strict";s.d(r,{default:()=>N});var t=s(60687),a=s(43210),o=s(85814),l=s.n(o),n=s(16189),i=s(49625),d=s(99891),c=s(53311),h=s(93508),m=s(99270),u=s(46001),x=s(84027),g=s(19080),p=s(58869),v=s(40083),f=s(28561),b=s(93853);let w=()=>{let[e,r]=(0,a.useState)(null),[s,t]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=()=>{try{let e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s){let a=JSON.parse(s);r(a),t(e)}else r(null),t(null)}catch(e){console.error("Error parsing stored auth data:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),r(null),t(null)}l(!1)};e();let s=r=>{("token"===r.key||"user"===r.key)&&e()};window.addEventListener("storage",s);let a=()=>{e()};return window.addEventListener("authStateChanged",a),()=>{window.removeEventListener("storage",s),window.removeEventListener("authStateChanged",a)}},[]),{user:e,token:s,loading:o,isAuthenticated:!!e&&!!s,logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(null),t(null),window.dispatchEvent(new Event("authStateChanged"))},updateUser:(e,s)=>{r(e),localStorage.setItem("user",JSON.stringify(e)),s&&(t(s),localStorage.setItem("token",s)),window.dispatchEvent(new Event("authStateChanged"))}}};function N(){let[e,r]=(0,a.useState)(""),{user:s,loading:o,isAuthenticated:N,logout:y}=w(),j=(0,n.usePathname)(),A=(0,n.useRouter)(),S=j?.startsWith("/dashboard")??!1,P=j?.startsWith("/admin-dashboard")??!1,R=j?.startsWith("/warehouse-dashboard")??!1,E=j?.startsWith("/buyer-dashboard")??!1,I=S||P||R||E,k=async()=>{try{y(),b.oR.success("You have been logged out successfully"),A.push("/")}catch(e){console.error("Error signing out:",e),b.oR.error("Error logging out")}},O=()=>{if(!s)return"Dashboard";switch(s.role){case"ADMINISTRATOR":return"Admin Panel";case"WAREHOUSE_GUY":return"Warehouse";case"BUYER":return"Buyer Panel";default:return"Dashboard"}};return o?(0,t.jsx)("nav",{className:"sticky top-0 z-50 w-full bg-white border-b border-gray-200 px-6 py-6 shadow-lg",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,t.jsx)("div",{className:"w-32 h-6 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"w-64 h-8 bg-gray-200 rounded animate-pulse"}),(0,t.jsx)("div",{className:"w-24 h-6 bg-gray-200 rounded animate-pulse"})]})}):(0,t.jsxs)("nav",{className:"sticky top-0 z-50 w-full bg-white border-b border-gray-200 px-3 py-3 shadow-lg",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)(l(),{href:"/",className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-teal-500 rounded-md flex items-center justify-center shadow-md",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:"N"})}),(0,t.jsx)("span",{className:"text-xl font-bold text-gray-800",children:"NERATION"})]}),!I||E?(0,t.jsx)("div",{className:"flex-1 max-w-2xl mx-auto w-full",children:(0,t.jsxs)("form",{onSubmit:r=>{r.preventDefault(),e.trim()&&(E?A.push(`/marketplace/search?q=${encodeURIComponent(e)}`):A.push(`/search?q=${encodeURIComponent(e)}`),console.log("Search query:",e))},className:"relative flex",role:"search",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:E?"Search marketplace...":"Search products...",className:"w-full px-5 py-3 text-sm text-gray-700 bg-gray-100 border border-gray-300 rounded-l-full focus:outline-none focus:ring-2 focus:ring-teal-500 shadow-sm","aria-label":"Search"}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-3 bg-teal-500 text-white rounded-r-full hover:bg-teal-600 transition shadow-md hover:shadow-lg","aria-label":"Submit search",children:(0,t.jsx)(m.A,{className:"w-5 h-5"})})]})}):(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{href:I?"/":(()=>{if(!s)return"/dashboard";switch(s.role){case"ADMINISTRATOR":return"/admin-dashboard";case"WAREHOUSE_GUY":return"/warehouse-dashboard";case"BUYER":return"/buyer-dashboard";default:return"/dashboard"}})(),className:"flex items-center space-x-2 text-gray-700 hover:text-teal-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-50 hover:shadow-sm","aria-label":I?"Go to marketplace":`Go to ${O()}`,children:[I?(0,t.jsx)(u.A,{className:"w-5 h-5"}):(()=>{if(!s)return(0,t.jsx)(i.A,{className:"w-5 h-5"});switch(s.role){case"ADMINISTRATOR":return(0,t.jsx)(d.A,{className:"w-5 h-5"});case"WAREHOUSE_GUY":return(0,t.jsx)(c.A,{className:"w-5 h-5"});case"BUYER":return(0,t.jsx)(h.A,{className:"w-5 h-5"});default:return(0,t.jsx)(i.A,{className:"w-5 h-5"})}})(),(0,t.jsx)("span",{className:"font-medium hidden sm:inline",children:I?"Marketplace":O()})]}),s?.role==="ADMINISTRATOR"&&(0,t.jsxs)(l(),{href:"/admin/settings",className:"flex items-center space-x-2 text-gray-700 hover:text-teal-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-50 hover:shadow-sm",title:"Settings",children:[(0,t.jsx)(x.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium hidden lg:inline",children:"Settings"})]}),s?.role==="WAREHOUSE_GUY"&&(0,t.jsxs)(l(),{href:"/warehouse/inventory",className:"flex items-center space-x-2 text-gray-700 hover:text-teal-600 transition-colors px-3 py-2 rounded-lg hover:bg-gray-50 hover:shadow-sm",title:"Inventory",children:[(0,t.jsx)(g.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"font-medium hidden lg:inline",children:"Inventory"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 text-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 max-w-[200px] truncate px-2 py-1 rounded-lg",children:[(0,t.jsx)("div",{className:`w-9 h-9 bg-gradient-to-br ${(()=>{if(!s)return"from-teal-400 to-teal-600";switch(s.role){case"ADMINISTRATOR":return"from-red-400 to-red-600";case"WAREHOUSE_GUY":return"from-orange-400 to-orange-600";case"BUYER":return"from-blue-400 to-blue-600";case"FARMER":return"from-green-400 to-green-600";case"SELLER":return"from-purple-400 to-purple-600";default:return"from-teal-400 to-teal-600"}})()} rounded-full flex items-center justify-center shadow-md`,children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium truncate text-sm",children:s?.firstName&&s?.lastName?`${s.firstName} ${s.lastName}`:s?.displayName?s.displayName:s?.email?s.email.split("@")[0]:"User"}),s?.role&&(0,t.jsx)("span",{className:"text-xs text-gray-500 uppercase tracking-wide",children:s.role.replace("_"," ")})]})]}),(0,t.jsxs)("button",{onClick:k,className:"flex items-center space-x-1 px-3 py-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors shadow-sm hover:shadow-md",title:"Logout","aria-label":"Logout",children:[(0,t.jsx)(v.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs font-medium hidden sm:inline",children:"Logout"})]})]})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 hover:shadow-sm transition-all",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),(0,t.jsx)(l(),{href:"/login",className:"font-medium hover:underline","aria-label":"Login",children:"Login"}),(0,t.jsx)("span",{className:"text-gray-400",children:"|"}),(0,t.jsx)(l(),{href:"/signup/farmer",className:"font-medium hover:underline","aria-label":"Register",children:"Register"})]}),!P&&!R&&(!I||E)&&(0,t.jsxs)("div",{className:"relative cursor-pointer group p-2 rounded-lg hover:bg-gray-50 hover:shadow-sm transition-all","aria-label":"Shopping cart",children:[(0,t.jsx)(f.A,{className:"w-6 h-6 text-gray-600 group-hover:text-gray-800 transition"}),(0,t.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-semibold rounded-full w-5 h-5 flex items-center justify-center shadow-md",children:"0"})]})]})]}),s?.role==="ADMINISTRATOR"&&P&&(0,t.jsx)("div",{className:"bg-red-50 border-t border-red-200 px-4 py-2",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center space-x-2 text-red-700 text-sm",children:[(0,t.jsx)(d.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Administrator Mode - Full System Access"})]})}),s?.role==="WAREHOUSE_GUY"&&R&&(0,t.jsx)("div",{className:"bg-orange-50 border-t border-orange-200 px-4 py-2",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center space-x-2 text-orange-700 text-sm",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Warehouse Management - Inventory & Orders"})]})})]})}},8177:(e,r,s)=>{Promise.resolve().then(s.bind(s,89349)),Promise.resolve().then(s.bind(s,93853)),Promise.resolve().then(s.bind(s,72071))},21083:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},41612:(e,r,s)=>{"use strict";s.d(r,{ApolloProvider:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call ApolloProvider() from the server but ApolloProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\HP\\Downloads\\Marketplace\\Marketplace Code\\src\\app\\apollo-provider.tsx","ApolloProvider")},55427:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},61135:()=>{},70440:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},72071:(e,r,s)=>{"use strict";s.d(r,{ApolloProvider:()=>g});var t=s(60687),a=s(38281),o=s(26408),l=s(83649),n=s(39768),i=s(1566),d=s(14744),c=s(42629);let h=(0,o.$)({uri:"https://coffee-sys-api.vercel.app/graphql"}),m=(0,d.o)((e,{headers:r})=>({headers:{...r,authorization:""}})),u=(0,c.S)(({graphQLErrors:e,networkError:r})=>{e&&e.forEach(({message:e,locations:r,path:s})=>{console.error(`GraphQL error: Message: ${e}, Location: ${r}, Path: ${s}`)}),r&&(console.error(`Network error: ${r}`),"statusCode"in r&&401===r.statusCode&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"))}),x=new l.R({link:(0,n.H)([u,m,h]),cache:new i.D,defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}});function g({children:e}){return(0,t.jsx)(a.X,{client:x,children:e})}},92497:(e,r,s)=>{Promise.resolve().then(s.bind(s,74559)),Promise.resolve().then(s.bind(s,81819)),Promise.resolve().then(s.bind(s,41612))},94431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var t=s(37413);s(61135),s(56070);var a=s(41612),o=s(74559),l=s(81819);function n({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsxs)("body",{children:[(0,t.jsx)(l.ToastContainer,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,t.jsx)(o.GoogleOAuthProvider,{clientId:"411082912715-r127ug6243m299mlq0iq5k4rgfbd09mp.apps.googleusercontent.com",children:(0,t.jsx)(a.ApolloProvider,{children:e})})]})})}}};